--- a/net/minecraft/world/chunk/light/LightStorage.java
+++ b/net/minecraft/world/chunk/light/LightStorage.java
@@ -176,7 +176,7 @@
    }
 
    protected void updateLight(ChunkLightProvider<M, ?> lightProvider, boolean doSkylight, boolean skipEdgeLightPropagation) {
-      if (this.hasLightUpdates() || !this.queuedSections.isEmpty()) {
+      if (this.hasLightUpdates() || !this.queuedSections.isEmpty()) {{
          LongIterator objectIterator = this.sectionsToRemove.iterator();
 
          while(objectIterator.hasNext()) {
@@ -203,6 +203,7 @@
 
          this.sectionsToRemove.clear();
          this.hasLightUpdates = false;
+         }
          ObjectIterator<Long2ObjectMap.Entry<ChunkNibbleArray>> objectIterator = this.queuedSections.long2ObjectEntrySet().iterator();
 
          while(objectIterator.hasNext()) {
